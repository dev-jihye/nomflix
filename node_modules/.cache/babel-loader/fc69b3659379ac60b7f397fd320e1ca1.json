{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sophie/code/nomflix/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sophie/code/nomflix/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sophie/code/nomflix/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sophie/code/nomflix/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sophie/code/nomflix/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sophie/code/nomflix/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{moviesApi,tvApi}from\"api\";import React from\"react\";import SearchPresenter from\"./SearchPresenter\";import{jsx as _jsx}from\"react/jsx-runtime\";var _default=/*#__PURE__*/function(_React$Component){_inherits(_default,_React$Component);var _super=_createSuper(_default);function _default(){var _this;_classCallCheck(this,_default);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={movieResults:null,tvResults:null,searchTerm:\"\",loading:false,error:null};_this.handleSubmit=function(event){event.preventDefault();var searchTerm=_this.state.searchTerm;if(searchTerm!==\"\"){_this.searchByTerm();}};_this.updateTerm=function(event){var value=event.target.value;_this.setState({searchTerm:value});};_this.searchByTerm=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var searchTerm,_yield$moviesApi$sear,movieResults,_yield$tvApi$search,tvResults;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchTerm=_this.state.searchTerm;_this.setState({loading:true});_context.prev=2;_context.next=5;return moviesApi.search(searchTerm);case 5:_yield$moviesApi$sear=_context.sent;movieResults=_yield$moviesApi$sear.data.results;_context.next=9;return tvApi.search(searchTerm);case 9:_yield$tvApi$search=_context.sent;tvResults=_yield$tvApi$search.data.results;_this.setState({movieResults:movieResults,tvResults:tvResults});_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);_this.setState({error:\"Can't find results.\"});case 17:_context.prev=17;_this.setState({loading:false});return _context.finish(17);case 20:case\"end\":return _context.stop();}}},_callee,null,[[2,14,17,20]]);}));return _this;}_createClass(_default,[{key:\"render\",value:function render(){var _this$state=this.state,movieResults=_this$state.movieResults,tvResults=_this$state.tvResults,searchTerm=_this$state.searchTerm,loading=_this$state.loading,error=_this$state.error;return/*#__PURE__*/_jsx(SearchPresenter,{movieResults:movieResults,tvResults:tvResults,searchTerm:searchTerm,loading:loading,error:error,handleSubmit:this.handleSubmit,updateTerm:this.updateTerm});}}]);return _default;}(React.Component);export{_default as default};","map":{"version":3,"sources":["/Users/sophie/code/nomflix/src/Routes/Search/SearchContainer.js"],"names":["moviesApi","tvApi","React","SearchPresenter","state","movieResults","tvResults","searchTerm","loading","error","handleSubmit","event","preventDefault","searchByTerm","updateTerm","value","target","setState","search","data","results","Component"],"mappings":"m1BAAA,OAASA,SAAT,CAAoBC,KAApB,KAAiC,KAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,C,sYAGIC,K,CAAQ,CACJC,YAAY,CAAE,IADV,CAEJC,SAAS,CAAE,IAFP,CAGJC,UAAU,CAAE,EAHR,CAIJC,OAAO,CAAE,KAJL,CAKJC,KAAK,CAAE,IALH,C,OAQRC,Y,CAAe,SAACC,KAAD,CAAW,CACtBA,KAAK,CAACC,cAAN,GACA,GAAQL,CAAAA,UAAR,CAAuB,MAAKH,KAA5B,CAAQG,UAAR,CACA,GAAGA,UAAU,GAAK,EAAlB,CAAsB,CAClB,MAAKM,YAAL,GACH,CACJ,C,OAEDC,U,CAAa,SAACH,KAAD,CAAW,CACpB,GAAkBI,CAAAA,KAAlB,CAA8BJ,KAA9B,CAAQK,MAAR,CAAkBD,KAAlB,CACA,MAAKE,QAAL,CAAc,CACVV,UAAU,CAAEQ,KADF,CAAd,EAGH,C,OAEDF,Y,sEAAe,mNACHN,UADG,CACY,MAAKH,KADjB,CACHG,UADG,CAEX,MAAKU,QAAL,CAAc,CAAET,OAAO,CAAE,IAAX,CAAd,EAFW,sCAIuCR,CAAAA,SAAS,CAACkB,MAAV,CAAiBX,UAAjB,CAJvC,4CAIgBF,YAJhB,uBAIAc,IAJA,CAIOC,OAJP,uBAKoCnB,CAAAA,KAAK,CAACiB,MAAN,CAAaX,UAAb,CALpC,0CAKgBD,SALhB,qBAKAa,IALA,CAKOC,OALP,CAMP,MAAKH,QAAL,CAAc,CAAEZ,YAAY,CAAZA,YAAF,CAAgBC,SAAS,CAATA,SAAhB,CAAd,EANO,iFAQP,MAAKW,QAAL,CAAc,CAAER,KAAK,CAAE,qBAAT,CAAd,EARO,yBAUP,MAAKQ,QAAL,CAAc,CAAET,OAAO,CAAE,KAAX,CAAd,EAVO,sG,4DAef,iBAAS,CACL,gBAA8D,KAAKJ,KAAnE,CAAOC,YAAP,aAAOA,YAAP,CAAqBC,SAArB,aAAqBA,SAArB,CAAgCC,UAAhC,aAAgCA,UAAhC,CAA4CC,OAA5C,aAA4CA,OAA5C,CAAqDC,KAArD,aAAqDA,KAArD,CACA,mBACI,KAAC,eAAD,EACI,YAAY,CAAEJ,YADlB,CAEI,SAAS,CAAEC,SAFf,CAGI,UAAU,CAAEC,UAHhB,CAII,OAAO,CAAEC,OAJb,CAKI,KAAK,CAAEC,KALX,CAMI,YAAY,CAAE,KAAKC,YANvB,CAOI,UAAU,CAAE,KAAKI,UAPrB,EADJ,CAWH,C,sBApDwBZ,KAAK,CAACmB,S","sourcesContent":["import { moviesApi, tvApi } from \"api\";\nimport React from \"react\";\nimport SearchPresenter from \"./SearchPresenter\";\n\nexport default class extends React.Component {\n    state = {\n        movieResults: null,\n        tvResults: null,\n        searchTerm: \"\",\n        loading: false,\n        error: null\n    };\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        const { searchTerm } = this.state;\n        if(searchTerm !== \"\") {\n            this.searchByTerm();\n        }\n    }\n\n    updateTerm = (event) => {\n        const { target: { value } } = event;\n        this.setState({\n            searchTerm: value\n        });\n    }\n\n    searchByTerm = async() => {\n        const { searchTerm } = this.state;\n        this.setState({ loading: true });\n        try {\n            const {data: {results: movieResults}} = await moviesApi.search(searchTerm);\n            const {data: {results: tvResults}} = await tvApi.search(searchTerm);\n            this.setState({ movieResults, tvResults });\n        } catch {\n            this.setState({ error: \"Can't find results.\" })\n        } finally {\n            this.setState({ loading: false });\n        }\n\n    }\n\n    render() {\n        const {movieResults, tvResults, searchTerm, loading, error} = this.state;\n        return (\n            <SearchPresenter \n                movieResults={movieResults}\n                tvResults={tvResults}\n                searchTerm={searchTerm}\n                loading={loading}\n                error={error}\n                handleSubmit={this.handleSubmit}\n                updateTerm={this.updateTerm}\n            />\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}